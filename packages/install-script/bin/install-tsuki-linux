#!/bin/bash
set -e

error() {
  echo "Error: $1"
  exit 1
}

load_config() {
  CONFIG_PATH=$1

  if [ ! -f $CONFIG_PATH ]  || [ ! -r $CONFIG_PATH ]; then
    error "Configuration file not found or failed to load."
  fi

  export CONFIG=$(cat $CONFIG_PATH)
}

# setup_partition() {
# }

install_tsuki_linux() {
  env CHROOT="true" \
    arch-chroot $MOUNT_POINT bash /installer/setup.sh
}

# if [ $CHROOT = "true" ]; then
# fi

if [ -z $1 ]; then
  error "The configuration file was not specified as an argument."
fi

load_config $1
